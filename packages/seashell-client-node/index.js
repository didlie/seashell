module.exports=function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Router=exports.App=void 0;var n=t(2),u=r(n),o=t(14),a=r(o);exports.App=u["default"],exports.Router=a["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),u=r(n),o=t(4),a=r(o),i=t(5),s=r(i),l=t(6),c=r(l),f=t(7),d=r(f),p=t(8),h=r(p),S=t(9),b=r(S),v=t(10),_=r(v),E=t(11),k=r(E),m=t(12),x=r(m),y=t(13),g=r(y),R=t(14),q=r(R),A=t(18),O=r(A),j=t(19),C=function(e){function t(){var e,r,n,o,i=this;(0,b["default"])(this,t);for(var l=arguments.length,f=Array(l),p=0;p<l;p++)f[p]=arguments[p];return r=n=(0,_["default"])(this,(e=(0,h["default"])(t)).call.apply(e,[this].concat(f))),n.state={isStarted:!1,isOnline:!1,isRegistered:!1,importEmitterStack:{}},n.handleRequest=function(){var e=(0,d["default"])(s["default"].mark(function t(e){var r,u,o,a,l,f;return s["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.state.socket,u=n,o=u.handleLoop,a=u.exportActionStack,console.log(j.SeashellChalk+" handle request: "+(0,c["default"])(e)),l={headers:e.headers,body:{},end:function(){r.emit("I_HAVE_HANDLE_THIS_REQUEST",{headers:l.headers,body:l.body})}},f=function i(e,t,r,n,u){return o(e,t,r,i,n,u)},f(null,e,l,0,e.headers.originUrl);case 8:case"end":return t.stop()}},t,i)}));return function(t){return e.apply(this,arguments)}}(),n.request=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!=("undefined"==typeof t?"undefined":(0,a["default"])(t)))throw j.SeashellChalk+" request data must be an object.";var r=n.state,o=r.socket,i=r.importEmitterStack,s=r.appId;return new u["default"](function(r,u){try{var l=function(){if(!n.state.isOnline)return{v:u("YOUR_SERVICE_IS_OFFLINE")};var a=x["default"].v4(),l={body:t,headers:{appId:s,callbackId:a}},f=e.search("/");if(f<0)l.headers.importAppName=e,l.headers.originUrl="/";else{var d=0==f?e.substr(1):e,p=d.search("/");l.headers.importAppName=d.substring(0,p),l.headers.originUrl=d.substring(p)}console.log(j.SeashellChalk+" Start request servicehub, data: "+(0,c["default"])(l)),i[a]=new O["default"],i[a].on("RESPONSE",function(e){return r(e),delete i[a],null}),o.emit("I_HAVE_A_REQUEST",l)}();if("object"===("undefined"==typeof l?"undefined":(0,a["default"])(l)))return l.v}catch(f){console.log(j.SeashellChalk+" "+(f.stack||f)),u(f)}})},n.requestStream=function(){},n.connect=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(n.state.isStarted)return!1;console.log(j.SeashellChalk+" connection options: "+(0,c["default"])(e));var t=n,r=n,u=r.handleRequest,o=(0,g["default"])(e.url);n.setState({opts:e,appId:e.key.appId,isStarted:!0,socket:o}),o.on("connect",function(){console.log(j.SeashellChalk+" connected"),console.log(j.SeashellChalk+" register"),t.setState({isOnline:!0}),o.emit("REGISTER",e.key)}),o.on("YOUR_REGISTER_HAS_RESPONSE",function(e){t.setState({isRegistered:!0})}),o.on("YOUR_REQUEST_HAS_RESPONSE",function(e){var r=n.state.importEmitterStack,u=e.headers.callbackId;r[u].emit("RESPONSE",e),delete r[u],t.setState({importEmitterStack:r})}),o.on("PLEASE_HANDLE_THIS_REQUEST",u),o.on("disconnect",function(){console.log(j.SeashellChalk+" lost connection"),t.setState({isOnline:!1})})},n.disconnect=function(){if(n.state.isStarted){var e=n.state.socket;e.disconnect()}console.log(j.SeashellChalk+" disconnected")},o=r,(0,_["default"])(n,o)}return(0,k["default"])(t,e),t}(q["default"]);exports["default"]=C,e.exports=exports["default"]},function(e,exports){e.exports=require("babel-runtime/core-js/promise")},function(e,exports){e.exports=require("babel-runtime/helpers/typeof")},function(e,exports){e.exports=require("babel-runtime/regenerator")},function(e,exports){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,exports){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,exports){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,exports){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,exports){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,exports){e.exports=require("babel-runtime/helpers/inherits")},function(e,exports){e.exports=require("uuid")},function(e,exports){e.exports=require("socket.io-client")},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(5),u=r(n),o=t(7),a=r(o),i=t(8),s=r(i),l=t(9),c=r(l),f=t(10),d=r(f),p=t(11),h=r(p),S=t(15),b=r(S),v=t(17),_=r(v),E=function(e){function t(){for(var e,r,n,o,i=arguments.length,l=Array(i),f=0;f<i;f++)l[f]=arguments[f];return(0,c["default"])(this,t),r=n=(0,d["default"])(this,(e=(0,s["default"])(t)).call.apply(e,[this].concat(l))),n.exportActionStack=[],n.use=function(){var e,t;1==arguments.length?(e="",t=arguments[0]):(e=arguments[0],t=arguments[1]);var r=this.exportActionStack,n={path:e,isErrorHandle:!1};t instanceof Function?(n.isErrorHandle=(0,_["default"])(t),n.fn=t):n.router=t,r.push(n)},n.handleLoop=function(e,t,r,o,i,s){function l(e){var n=function(){var n=(0,a["default"])(u["default"].mark(function o(n,a){var i;return u["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,"error"!=n){u.next=3;break}return u.abrupt("return",a.fn(e,t,r,l));case 3:if("router"!=n){u.next=6;break}return i=s.substr(a.path.length),u.abrupt("return",a.router.handleLoop(e,t,r,l,d,i));case 6:return u.next=8,a.fn(t,r,l);case 8:return u.abrupt("return",u.sent);case 11:u.prev=11,u.t0=u["catch"](0),l(u.t0);case 14:case"end":return u.stop()}},o,this,[[0,11]])}));return function(e,t){return n.apply(this,arguments)}}();if(d++,d>=f.length)return o(e,t,r,o,i);var c=f[d];if(c.isErrorHandle)return e?n("error",c):l();if(e)return l(e);if(c.router)return n("router",c);if("undefined"!=typeof c.path){if(""!=c.path&&s!=c.path)return l();n(null,c)}}var c=n,f=c.exportActionStack,d=-1;l(e)},o=r,(0,d["default"])(n,o)}return(0,h["default"])(t,e),t}(b["default"]);exports["default"]=E,e.exports=exports["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(16),u=r(n),o=t(9),a=r(o),i=function s(){var e=this;(0,a["default"])(this,s),this.setState=function(t){e.state=(0,u["default"])({},e.state,t)}};exports["default"]=i,e.exports=exports["default"]},function(e,exports){e.exports=require("babel-runtime/core-js/object/assign")},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){try{return 4==e.toString().match(/[A-Z0-9a-z,(\s]*\)/)[0].split(",").length}catch(t){return!1}};exports["default"]=t,e.exports=exports["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(9),u=r(n),o=function a(){var e=this;(0,u["default"])(this,a),this.state={},this.on=function(t,r){if("function"==typeof r)return e.state[t]=r},this.emit=function(t,r){"function"==typeof e.state[t]&&e.state[t](r)}};exports["default"]=o,e.exports=exports["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeashellChalk=void 0;var n=t(20),u=r(n);exports.SeashellChalk=u["default"].blue.bold("[Seashell]")},function(e,exports){e.exports=require("chalk")}]);