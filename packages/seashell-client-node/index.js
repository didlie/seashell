module.exports=function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Router=exports.App=void 0;var n=t(2),u=r(n),a=t(15),o=r(a);exports.App=u["default"],exports.Router=o["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),u=r(n),a=t(4),o=r(a),i=t(5),s=r(i),l=t(6),c=r(l),f=t(7),d=r(f),p=t(8),h=r(p),v=t(9),b=r(v),S=t(10),_=r(S),m=t(11),E=r(m),x=t(12),k=r(x),g=t(13),y=r(g),R=t(14),O=r(R),q=t(15),j=r(q),A=t(19),C=r(A),I=t(20),M=function(e){function t(){var e,r,n,a,i=this;(0,_["default"])(this,t);for(var l=arguments.length,f=Array(l),p=0;p<l;p++)f[p]=arguments[p];return r=n=(0,E["default"])(this,(e=(0,b["default"])(t)).call.apply(e,[this].concat(f))),n.state={isStarted:!1,isOnline:!1,isRegistered:!1,importEmitterStack:{}},n.handleRequest=function(){var e=(0,h["default"])(s["default"].mark(function t(e){var r,u,a,o,l;return s["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.state.socket,u=n,a=u.handleLoop,console.log(I.SeashellChalk+" handle request: "+(0,d["default"])(e)),(0,c["default"])(e,{params:{}}),o={headers:e.headers,body:{},end:function(){r.emit("I_HAVE_HANDLE_THIS_REQUEST",{headers:o.headers,body:o.body})}},l=function i(e,t,r,n,u){return a(e,t,r,i,n,u)},l(null,e,o,0,e.headers.originUrl);case 8:case"end":return t.stop()}},t,i)}));return function(t){return e.apply(this,arguments)}}(),n.request=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!=("undefined"==typeof t?"undefined":(0,o["default"])(t)))throw I.SeashellChalk+" request data must be an object.";var r=n.state,a=r.socket,i=r.importEmitterStack,s=r.appId;return new u["default"](function(r,u){try{var l=function(){if(!n.state.isOnline)return{v:u("YOUR_SERVICE_IS_OFFLINE")};var o=y["default"].v4(),l={body:t,headers:{appId:s,callbackId:o}},c=e.search("/");if(c<0)l.headers.importAppName=e,l.headers.originUrl="/";else{var f=0==c?e.substr(1):e,p=f.search("/");l.headers.importAppName=f.substring(0,p),l.headers.originUrl=f.substring(p)}console.log(I.SeashellChalk+" Start request servicehub, data: "+(0,d["default"])(l)),i[o]=new C["default"],i[o].on("RESPONSE",function(e){return r(e),delete i[o],null}),a.emit("I_HAVE_A_REQUEST",l)}();if("object"===("undefined"==typeof l?"undefined":(0,o["default"])(l)))return l.v}catch(c){console.log(I.SeashellChalk+" "+(c.stack||c)),u(c)}})},n.requestStream=function(){},n.connect=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(n.state.isStarted)return!1;console.log(I.SeashellChalk+" connection options: "+(0,d["default"])(e));var t=n,r=n,u=r.handleRequest,a=(0,O["default"])(e.url);n.setState({opts:e,appId:e.key.appId,isStarted:!0,socket:a}),a.on("connect",function(){console.log(I.SeashellChalk+" connected"),console.log(I.SeashellChalk+" register"),t.setState({isOnline:!0}),a.emit("REGISTER",e.key)}),a.on("YOUR_REGISTER_HAS_RESPONSE",function(e){t.setState({isRegistered:!0})}),a.on("YOUR_REQUEST_HAS_RESPONSE",function(e){var r=n.state.importEmitterStack,u=e.headers.callbackId;r[u].emit("RESPONSE",e),delete r[u],t.setState({importEmitterStack:r})}),a.on("PLEASE_HANDLE_THIS_REQUEST",u),a.on("disconnect",function(){console.log(I.SeashellChalk+" lost connection"),t.setState({isOnline:!1})})},n.disconnect=function(){if(n.state.isStarted){var e=n.state.socket;e.disconnect()}console.log(I.SeashellChalk+" disconnected")},a=r,(0,E["default"])(n,a)}return(0,k["default"])(t,e),t}(j["default"]);exports["default"]=M,e.exports=exports["default"]},function(e,exports){e.exports=require("babel-runtime/core-js/promise")},function(e,exports){e.exports=require("babel-runtime/helpers/typeof")},function(e,exports){e.exports=require("babel-runtime/regenerator")},function(e,exports){e.exports=require("babel-runtime/core-js/object/assign")},function(e,exports){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,exports){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,exports){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,exports){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,exports){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,exports){e.exports=require("babel-runtime/helpers/inherits")},function(e,exports){e.exports=require("uuid")},function(e,exports){e.exports=require("socket.io-client")},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(5),u=r(n),a=t(8),o=r(a),i=t(6),s=r(i),l=t(9),c=r(l),f=t(10),d=r(f),p=t(11),h=r(p),v=t(12),b=r(v),S=t(16),_=r(S),m=t(17),E=r(m),x=t(18),k=r(x),g=function(e){function t(){for(var e,r,n,a,i=arguments.length,l=Array(i),f=0;f<i;f++)l[f]=arguments[f];return(0,d["default"])(this,t),r=n=(0,h["default"])(this,(e=(0,c["default"])(t)).call.apply(e,[this].concat(l))),n.exportActionStack=[],n.use=function(){var e,t;1==arguments.length?(e="",t=arguments[0]):(e=arguments[0],t=arguments[1]);var r=this.exportActionStack,n={path:e,isErrorHandle:!1};t instanceof Function?(n.isErrorHandle=(0,E["default"])(t),n.fn=t):n.router=t,r.push(n)},n.handleLoop=function(e,t,r,a,i,l){function c(e){var n=function(){var n=(0,o["default"])(u["default"].mark(function a(n,o){var i;return u["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,"error"!=n){u.next=3;break}return u.abrupt("return",o.fn(e,t,r,c));case 3:if("router"!=n){u.next=6;break}return i=l.substr(o.path.length),u.abrupt("return",o.router.handleLoop(e,t,r,c,p,i));case 6:return u.next=8,o.fn(t,r,c);case 8:return u.abrupt("return",u.sent);case 11:u.prev=11,u.t0=u["catch"](0),c(u.t0);case 14:case"end":return u.stop()}},a,this,[[0,11]])}));return function(e,t){return n.apply(this,arguments)}}();if(p++,p>=d.length)return a(e,t,r,a,i);var f=d[p];if(f.isErrorHandle)return e?n("error",f):c();if(e)return c(e);if(f.router)return n("router",f);if("undefined"!=typeof f.path){if(""==f.path)return n(null,f);if(f.path.indexOf(":")==-1)return l!=f.path?c():n(null,f);var h=(0,k["default"])(f.path,l);if(!h.match)return c();(0,s["default"])(t.params,h.params),n(null,f)}}var f=n,d=f.exportActionStack,p=-1;c(e)},a=r,(0,h["default"])(n,a)}return(0,b["default"])(t,e),t}(_["default"]);exports["default"]=g,e.exports=exports["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(6),u=r(n),a=t(10),o=r(a),i=function s(){var e=this;(0,o["default"])(this,s),this.setState=function(t){e.state=(0,u["default"])({},e.state,t)}};exports["default"]=i,e.exports=exports["default"]},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){try{return 4==e.toString().match(/[A-Z0-9a-z,(\s]*\)/)[0].split(",").length}catch(t){return!1}};exports["default"]=t,e.exports=exports["default"]},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e,t){var r={match:!1,params:{}},n=function(e){return e.split("/").filter(function(e){return""!=e})},u=n(e),a=n(t);if(u.length!=a.length)return r;var o=function i(e){if(e==u.length)return r.match=!0,r;if(":"==u[e][0])r.params[u[e].substr(1)]=a[e];else if(u[e]!=a[e])return r;return e++,i(e)};return o(0,[])};exports["default"]=t,e.exports=exports["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(10),u=r(n),a=function o(){var e=this;(0,u["default"])(this,o),this.state={},this.on=function(t,r){if("function"==typeof r)return e.state[t]=r},this.emit=function(t,r){"function"==typeof e.state[t]&&e.state[t](r)}};exports["default"]=a,e.exports=exports["default"]},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeashellChalk=void 0;var n=t(21),u=r(n);exports.SeashellChalk=u["default"].blue.bold("[Seashell]")},function(e,exports){e.exports=require("chalk")}]);